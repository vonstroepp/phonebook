{"version":3,"sources":["services/persons.js","components/Filter.js","components/Numbers.js","components/PersonForm.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","updatedPerson","console","log","number","put","person","delete","Filter","searchTerm","handleSearchChange","className","placeholder","onChange","value","Numbers","updateName","deleteName","name","onClick","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Notification","message","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchTerm","searchResults","setSearchResults","errorMessage","setErrorMessage","useEffect","personService","initialPersons","window","confirm","indexOfPerson","indexOf","splice","setTimeout","catch","e","alert","results","filter","toLowerCase","includes","event","target","preventDefault","personObject","updatedPersonObject","found","find","element","returnedPerson","concat","length","map","key","date","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+PAEMA,EAAU,eAgCD,EA9BA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAChB,OAAOA,EAASC,SA2BT,EAvBM,SAAAC,GAEjB,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAChB,OAAOA,EAASC,SAoBT,EAhBM,SAACG,EAAIC,GAGtB,OAFAC,QAAQC,IAAI,gBAAiBF,EAAcG,OAAQJ,GACnCP,IAAMY,IAAN,UAAab,EAAb,YAAwBQ,GAAMC,GAC/BN,MAAK,SAAAC,GAEhB,OADAM,QAAQC,IAAI,YAAaP,EAASC,MAC3BD,EAASC,SAWT,EAPM,SAACS,GAElB,OADgBb,IAAMc,OAAN,UAAgBf,EAAhB,YAA2Bc,EAAON,KACnCL,MAAK,SAAAC,GAChB,OAAOA,EAASC,SCjBTW,MAXf,YAAoD,IAAlCC,EAAiC,EAAjCA,WAAYC,EAAqB,EAArBA,mBAC1B,OACI,yBAAKC,UAAU,UACX,yDACA,2BAAOC,YAAY,qBACZC,SAAWH,EACXI,MAAQL,MCKXM,MAXf,YAAwD,IAAnCT,EAAkC,EAAlCA,OAAQU,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,WAEtC,OACQ,yBAAKN,UAAU,WACX,sCAAaL,EAAOY,KAApB,aAAqCZ,EAAOF,QAC5C,4BAAQe,QAAU,kBAAMH,EAAWV,KAAnC,UACA,4BAAQa,QAAU,kBAAMF,EAAWX,KAAnC,YCUDc,MAhBf,YAA4F,IAAtEC,EAAqE,EAArEA,QAASC,EAA4D,EAA5DA,QAASC,EAAmD,EAAnDA,iBAAkBC,EAAiC,EAAjCA,UAAWC,EAAsB,EAAtBA,mBACjE,OACI,0BAAMC,SAAUL,GACZ,kDACsB,2BAAOP,MAAQQ,EAAUT,SAAWU,KAE1D,oDACwB,2BAAOT,MAAQU,EAAYX,SAAWY,KAE9D,6BACI,4BAAQE,KAAK,UAAb,uBCEDC,MAZf,YAAoC,IAAZC,EAAW,EAAXA,QAEpB,MAAe,KAAZA,EACQ,KAGP,yBAAKlB,UAAU,SACVkB,ICgJEC,G,MAjJH,WAAO,IAAD,EAEcC,mBAAS,IAFvB,mBAETC,EAFS,KAEAC,EAFA,OAGcF,mBAAS,IAHvB,mBAGTT,EAHS,KAGAY,EAHA,OAIkBH,mBAAS,IAJ3B,mBAITP,EAJS,KAIEW,EAJF,OAKoBJ,mBAAS,IAL7B,mBAKTtB,EALS,KAKG2B,EALH,OAM0BL,mBAAS,IANnC,mBAMTM,EANS,KAMMC,EANN,OAOwBP,mBAAS,IAPjC,mBAOTQ,EAPS,KAOKC,EAPL,KAiBhBC,qBARa,WACXC,IAEG/C,MAAK,SAAAgD,GACJV,EAAWU,QAID,IAEhB,IAqDM3B,EAAa,SAACV,GAClBJ,QAAQC,IAAI,KAAMG,EAAON,KAIrBiB,EAAa,SAACX,GAClB,IAAMuB,EAAO,uCAAmCvB,EAAOY,KAA1C,MACb0B,OAAOC,QAAQhB,GAEfa,EACcpC,GACbX,MAAK,WACJ,IAAMmD,EAAgBd,EAAQe,QAAQzC,GACtC0B,EAAQgB,OAAOF,EAAe,GAC9Bb,EAAWD,GAEXQ,EAAgB,GAAD,OACVlC,EAAOY,KADG,sDAC+CZ,EAAON,KAErEiD,YAAW,WACTT,EAAgB,MACf,QAEJU,OAAM,SAAAC,GACLX,EACE,4BAEFS,YAAW,WACTT,EAAgB,QACf,QAGLY,MAAM,GAAD,OAAI9C,EAAOY,KAAX,yCAIPuB,qBAAU,WACR,IAAMY,EAAUrB,EAAQsB,QAAO,SAAAhD,GAAM,OAAIA,EAAOY,KAAKqC,cAAcC,SAAS/C,MAC5E6B,EAAiBe,KAChB,CAAC5C,EAAYuB,IAUhB,OACE,yBAAKrB,UAAU,aACb,2CACA,kBAAC,EAAD,CAAckB,QAAUU,IACvB,kBAAC,EAAD,CAAQ9B,WAAaA,EACdC,mBAnBe,SAAC+C,GAAD,OAAWrB,EAAcqB,EAAMC,OAAO5C,UAqB7D,6BACC,kBAAC,EAAD,CAAYO,QA9GD,SAACoC,GACfA,EAAME,iBAEN,IAAMC,EAAe,CACnB1C,KAAMI,EACNlB,OAAQoB,GAEJqC,EAAmB,2BACpBD,GADoB,IAEvBxD,OAAQoB,IAGJsC,EAAQ9B,EAAQ+B,MAAK,SAACC,GAC1B,OAAGA,EAAQ9C,OAAS0C,EAAa1C,KACxB8C,EAEF,QAGT,GAAIF,EAAM,CAER,IAAMjC,EAAO,UAAMiC,EAAM9D,GAAZ,aAAmB8D,EAAM5C,KAAzB,oFACb0B,OAAOC,QAAQhB,GAEfa,EACgBoB,EAAM9D,GAAI6D,GACrBlE,KAAKO,QAAQC,IAAI,MAAO0D,EAAqBD,IAC7CjE,MAAK,SAAAsE,GACJhC,EAAWD,EAAQkC,OAAOC,OAAOF,IACjC9B,EAAa,OAGnBiB,MAAM,kCAENV,EACgBkB,GACXjE,MAAK,SAAAsE,GACJhC,EAAWD,EAAQkC,OAAOD,IAE1B/B,EAAW,IACXC,EAAa,OAEhBe,OAAM,SAAAC,GACLX,EACE,qBAEFS,YAAW,WACTT,EAAgB,MACf,SA+DKlB,QAAUA,EACVC,iBAlBS,SAACkC,GAAD,OAAWvB,EAAWuB,EAAMC,OAAO5C,QAmB5CU,UAAcA,EACdC,mBAnBW,SAACgC,GAG1BtB,EAAasB,EAAMC,OAAO5C,UAkBxB,iDACgB,KAAfL,EACCuB,EAAQoC,KAAI,SAAC9D,GAAD,OAAY,kBAAC,EAAD,CAAS+D,IAAK/D,EAAON,GAAKM,OAASA,EAASU,WAAY,kBAAMA,EAAWV,IAASW,WAAY,kBAAMA,EAAWX,SAEvI+B,EAAc+B,KAAI,SAAC9D,GAAD,OAAY,kBAAC,EAAD,CAAS+D,IAAK/D,EAAON,GAAIM,OAASA,EAASgE,KAAOhE,EAAOgE,KAAOtD,WAAY,kBAAMA,EAAWV,IAASW,WAAY,kBAAMA,EAAWX,Y,MC9IzKiE,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.9adfc2ab.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => {\n        return response.data\n    })\n}\n\nconst createPerson = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => {\n        return response.data\n    })\n}\n\nconst updatePerson = (id, updatedPerson) => {\n    console.log('uodatedPerson', updatedPerson.number, id)\n    const request = axios.put(`${baseUrl}/${id}`, updatedPerson)\n    return request.then(response => {\n        console.log('response2', response.data)\n        return response.data\n    })\n}\n\nconst deletePerson = (person) => {\n    const request = axios.delete(`${baseUrl}/${person.id}`)\n    return request.then(response => {\n        return response.data\n    })\n}\n\nexport default { getAll, createPerson, updatePerson, deletePerson}","import React from 'react'\n\nfunction Filter({ searchTerm, handleSearchChange}) {\n    return (\n        <div className=\"filter\">\n            <h4>Type to search for a name</h4>\n            <input placeholder=\"type in lower caps\" \n                   onChange={ handleSearchChange } \n                   value={ searchTerm }/>\n        </div>\n    )\n}\n\nexport default Filter\n","import React from 'react'\n\n function Numbers ({  person, updateName, deleteName }) {\n\n    return  ( \n            <div className=\"numbers\">\n                <div>Name: { person.name }, Number: {person.number}</div> \n                <button onClick={ () => updateName(person)}>Update</button>\n                <button onClick={ () => deleteName(person) }>Delete</button>\n            </div>\n        )\n    };\n\n export default Numbers;","import React from 'react'\n\nfunction PersonForm({ addName, newName, handleNameChange, newNumber, handleNumberChange }) {\n    return (\n        <form onSubmit={addName}>\n            <div>\n                Enter a new Name: <input value={ newName } onChange={ handleNameChange }/>\n            </div>\n            <div>\n                Enter a new Number: <input value={ newNumber } onChange={ handleNumberChange }/>\n            </div>\n            <div>\n                <button type=\"submit\">Add a new person</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nfunction Notification({ message }) {\n    \n    if(message === ''){\n        return null\n    }\n    return (\n        <div className='error'>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification\n","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\nimport Filter from './components/Filter';\nimport Numbers from './components/Numbers';\nimport PersonForm from './components/PersonForm';\nimport Notification from './components/Notification';\nimport './App.css';\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([]); \n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const hook = () => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  };\n\n  useEffect(hook, []);\n\n  const addName = (event) => {\n    event.preventDefault()\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    const updatedPersonObject = {\n      ...personObject,\n      number: newNumber\n    }\n    \n    const found = persons.find((element) => {\n      if(element.name === personObject.name){\n        return element\n      }\n      return null\n    });\n    \n    if (found){\n      // console.log('found', found)\n      const message = `${found.id}, ${found.name} already exists in the phonebook. Do you want to update the pone number instead?`;\n      window.confirm(message)\n      ? \n      personService\n        .updatePerson(found.id, updatedPersonObject)\n          .then(console.log('upo', updatedPersonObject, personObject))\n          .then(returnedPerson => {\n            setPersons(persons.concat.length(returnedPerson))\n            setNewNumber('')\n          })\n      :\n      alert(\"Operation aborted by user\")\n    } else {\n      personService\n        .createPerson(personObject)\n          .then(returnedPerson => {\n            setPersons(persons.concat(returnedPerson))\n            // console.log('ret2', returnedPerson)\n            setNewName('')\n            setNewNumber('')\n        })\n        .catch(e => {\n          setErrorMessage(\n            'Error adding Name'\n          )\n          setTimeout(() => {\n            setErrorMessage('')\n          }, 5000)\n        })\n      }\n    }\n  \n  const updateName = (person) => {\n    console.log('id', person.id)\n    //TODO - update Names, update numbers\n  }  \n\n  const deleteName = (person) => {\n    const message = `Do you really want to delete ${person.name} ?`;\n    window.confirm(message) \n    ?\n    personService\n    .deletePerson(person)\n    .then(() => {\n      const indexOfPerson = persons.indexOf(person)\n      persons.splice(indexOfPerson, 1);\n      setPersons(persons)\n\n      setErrorMessage(\n        `${person.name} has been removed from the phone book. ID: ${person.id}`\n      )\n      setTimeout(() => {\n        setErrorMessage('')\n      }, 5000)\n    })\n    .catch(e => {\n      setErrorMessage(\n        'Could not remove contact'\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    })\n    : \n    alert(`${person.name}: is not deleted from the pone book`)\n  }\n\n  const handleSearchChange = (event) => setSearchTerm(event.target.value);\n  useEffect(() => {\n    const results = persons.filter(person => person.name.toLowerCase().includes(searchTerm));\n    setSearchResults(results);\n  }, [searchTerm, persons])\n  \n  const handleNameChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => { \n    // const results = person.filter(person => person.name.toLowerCase())\n    // console.log('hi', event.target)\n    setNewNumber(event.target.value)\n  };\n\n  \n  return (\n    <div className=\"container\">\n      <h2>A Phonebook</h2>\n      <Notification message={ errorMessage } />\n      {<Filter searchTerm={ searchTerm }\n              handleSearchChange = { handleSearchChange }\n  />}\n      <br />\n      {<PersonForm addName={ addName } \n                  newName={ newName } \n                  handleNameChange={ handleNameChange } \n                  newNumber = { newNumber }\n                  handleNumberChange = { handleNumberChange }\n/>   }       \n      <h2>Names and Numbers</h2>\n      {searchTerm === '' ? \n        persons.map((person) => <Numbers key={person.id}  person={ person } updateName={() => updateName(person)} deleteName={() => deleteName(person)} />)\n        :\n        searchResults.map((person) => <Numbers key={person.id} person={ person } date={ person.date } updateName={() => updateName(person)} deleteName={() => deleteName(person)} />)\n      }\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}